<?xml version="1.0" ?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" 
 	     xmlns:sensor="http://playerstage.sourceforge.net/gazebo/xmlschema/#sensor"
    	 xmlns:controller="http://playerstage.sourceforge.net/gazebo/xmlschema/#controller"
    	 xmlns:interface="http://playerstage.sourceforge.net/gazebo/xmlschema/#interface"
  name="deliver_rb">

  <!-- LASER ATTACHMENT -->
  <xacro:include filename="$(find deliver_rb)/urdf/hokuyo.xacro"/>

  <xacro:hokuyo_sensor parent="base_link">
	</xacro:hokuyo_sensor>
  
  <!-- Import all Gazebo-customization elements, including Gazebo colors, sensors, controller -->
  <xacro:include filename="$(find deliver_rb)/urdf/plug_in.gazebo" />


  <xacro:property name="length_wheel" value="0.06" />
	<xacro:property name="radius_wheel" value="0.08" />
	<xacro:property name="mass_wheel" value="1.5" />
	<xacro:property name="distance_2wheels" value="0.5" />	

	<xacro:property name="radius_base" value="0.6" />
	<xacro:property name="length_base" value="0.02" />
	<xacro:property name="mass_base" value="4" />


    <!-- KINECT ATTACHMENT -->
    <xacro:include filename="$(find deliver_rb)/urdf/kinect.xacro"/>
    <xacro:kinect_sensor parent_frame="hat">
    </xacro:kinect_sensor>
	


<!-- inertia for 3 popular shape -->
  <xacro:macro name="default_inertia" params="mass">
    <inertia>
      <mass value="${mass}" />
      <inertia 
        ixx="1.0" ixy="0.0" ixz="0.0"
        iyy="1.0" iyz="0.0"
        izz="1.0" />
    </inertia>
	</xacro:macro>
	
	<xacro:macro name="cylinder_inertia" params="m r h">
		<inertia  ixx="${m*(3*r*r+h*h)/12}" ixy = "0" ixz = "0"
	    		iyy="${m*(3*r*r+h*h)/12}" iyz = "0"
	    		izz="${m*r*r/2}"
  		/>
	</xacro:macro>	

	<xacro:macro name="sphere_inertia" params="m r">
		<inertia
			ixx="${2*m*r*r/5}" ixy = "0" ixz = "0"
		    	iyy="${2*m*r*r/5}" iyz = "0"
		    	izz="${2*m*r*r/5}"
		/>
	</xacro:macro>

<!-- inertia for 3 popular shape -->

  <!-- <link name="base_footprint">
   		<visual>
			<geometry>
      				<box size="0.001 0.001 0.001"/>
     			</geometry>
			<origin rpy="0 0 0" xyz="0 0 0"/>
   		</visual>
		<xacro:default_inertia mass="0.0001"/>
 	</link>

  <joint name="base_footprint_joint" type="fixed">
		<origin xyz="0 0 0" />
		<parent link="base_footprint" />
		<child link="base_link" />
	</joint> -->

  <link
    name="base_link">
    <inertial>
      <origin
        xyz="0.0018748 -2.8458E-17 -0.0047313"
        rpy="0 0 0" />
      <mass
        value="4" />
      <inertia
        ixx="0.025394"
        ixy="-4.7715E-19"
        ixz="-3.8944E-05"
        iyy="0.050269"
        iyz="-5.5879E-20"
        izz="0.075619" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/base_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>
  <link
    name="right_wheel">
    <inertial>
      <origin
        xyz="3.8799E-19 0 2.1874E-18"
        rpy="0 0 0" />
      <mass
        value="1.1143" />
      <inertia
        ixx="0.0020008"
        ixy="-2.5123E-21"
        ixz="3.405E-20"
        iyy="0.0033919"
        iyz="3.0361E-21"
        izz="0.0020008" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/right_wheel.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.79216 0.81961 0.93333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/right_wheel.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="base_right_join"
    type="continuous">
    <origin
      xyz="0 -0.25 0"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="right_wheel" />
    <axis
      xyz="0 1 0" />
  </joint>
  <link
    name="left_wheel">
    <inertial>
      <origin
        xyz="-1.31975619602331E-18 0 -8.88625198590593E-19"
        rpy="0 0 0" />
      <mass
        value="1.11429115383499" />
      <inertia
        ixx="0.00200083706988604"
        ixy="-1.65144393546253E-20"
        ixz="9.01511062397042E-20"
        iyy="0.00339186705795332"
        iyz="-7.15320021113774E-21"
        izz="0.00200083706988604" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/left_wheel.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/left_wheel.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="base_left_wheel"
    type="continuous">
    <origin
      xyz="0 0.25 0"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="left_wheel" />
    <axis
      xyz="0 1 0" />
  </joint>
  <link
    name="pole">
    <inertial>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <mass
        value="0" />
      <inertia
        ixx="0"
        ixy="0"
        ixz="0"
        iyy="0"
        iyz="0"
        izz="0" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/pole.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/pole.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="base_pole_join"
    type="fixed">
    <origin
      xyz="-0.0549999999999999 0 0"
      rpy="0 0 0" />
    <parent
      link="base_link" />
    <child
      link="pole" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="free_forward">
    <inertial>
      <origin
        xyz="2.77555756156289E-17 -1.78473511245526E-18 -0.0265597216130682"
        rpy="0 0 0" />
      <mass
        value="0.367480429154608" />
      <inertia
        ixx="0.000308959164383823"
        ixy="-5.83955431755321E-21"
        ixz="1.16318882227363E-20"
        iyy="0.000308959164383823"
        iyz="9.97736898770812E-21"
        izz="0.000377486723963042" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/free_forward.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/free_forward.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="pole_ff_join"
    type="fixed">
    <origin
      xyz="0.24 0 -0.01"
      rpy="0 0 0" />
    <parent
      link="pole" />
    <child
      link="free_forward" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="free_backward">
    <inertial>
      <origin
        xyz="-2.77555756156289E-17 -6.56426560994378E-19 -0.0265597216130682"
        rpy="0 0 0" />
      <mass
        value="0.367480429154608" />
      <inertia
        ixx="0.000308959164383823"
        ixy="1.83961226452716E-20"
        ixz="-1.76542212777665E-20"
        iyy="0.000308959164383823"
        iyz="1.86705601142899E-21"
        izz="0.000377486723963042" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/free_backward.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/free_backward.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="pole_fb_join"
    type="fixed">
    <origin
      xyz="-0.16 0 -0.01"
      rpy="0 0 0" />
    <parent
      link="pole" />
    <child
      link="free_backward" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="basket">
    <inertial>
      <origin
        xyz="0.1 -0.11 0.0588461538461538"
        rpy="0 0 0" />
      <mass
        value="1.56" />
      <inertia
        ixx="0.0134299230769231"
        ixy="3.97024177053883E-19"
        ixz="-1.15880430376558E-18"
        iyy="0.0120019230769231"
        iyz="2.60339405582985E-18"
        izz="0.018212" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/basket.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/basket.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="pole_basket_join"
    type="fixed">
    <origin
      xyz="0.03 0.11 0.3"
      rpy="0 0 0" />
    <parent
      link="pole" />
    <child
      link="basket" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="hat">
    <inertial>
      <origin
        xyz="0.11 0.05 -0.00500000000000012"
        rpy="0 0 0" />
      <mass
        value="0.22" />
      <inertia
        ixx="0.000185166666666667"
        ixy="2.79179908320294E-37"
        ixz="6.57523442521934E-22"
        iyy="0.000889166666666668"
        iyz="-2.9939791242282E-21"
        izz="0.00107066666666667" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/hat.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.792156862745098 0.819607843137255 0.933333333333333 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://deliver_rb/meshes/hat.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="basket_hat_join"
    type="fixed">
    <origin
      xyz="-0.0299999999999999 0 0.51"
      rpy="0 0 -1.5707963267949" />
    <parent
      link="basket" />
    <child
      link="hat" />
    <axis
      xyz="0 0 0" />
  </joint>

</robot>
